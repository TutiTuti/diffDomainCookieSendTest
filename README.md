# 다른 도메인 쿠키 보내기 테스트

1. 백엔드, 프론트 둘 다 도메인을 다르게 설정 

→ 둘다 로컬환경에서 진행했더니 프록시 설정을 안해도 쿠키를 받는것을 확인 
→ 백엔드만 ec2를 이용하여 올리고 테스트 진행

2. 백엔드만 ec2로 올리고 프록시 없이 진행하였을 때
→ 프론트에서 직접 백엔드로 요청하였을 때 결과를 우선 확인하고자 진행

     아래와 같은 결과를 받고 쿠키를 프론트에서 접근할 수 있는지 확인했는데 쿠키 접근 실패


백 도메인으로 쿠키가 등록

쿠키 존재 여부도 확인할 수 없음
이유

브라우저는 보안상의 이유로, 현재 실행 중인 프론트의 도메인과 일치하지 않는 쿠키에는 접근할 수 없게 되어 있다.

그래서 front.local 이라는 도메인을 가진 프론트는 ficket.store이라는 도메인을 가진 쿠키에 접근이 불가능한 것

 

3. 프론트에 프록시 설정을 하고 진행

→ 이번에는 프론트에 프록시 설정을 넣고 진행 


콘솔 창에 쿠키 내용 확인

도메인이 프론트로 되어있음을 확인할 수 있음
확인 결과 쿠키의 도메인이 프론트로 되어있고 프론트에서 해당 쿠키 접근을 확인 하였습니다.
프록시로 요청 시 쿠키 도메인이 프론트인 이유

→ 프록시 서버(Nginx, Vite 개발 서버 등)를 통해 /api와 같은 경로를 프론트 서버가 가로채고, 실제로는 백엔드 서버에 요청을 전달한 후 응답을 받아 브라우저에 전달, 이 과정에서 브라우저 입장에서는 요청과 응답 모두가 프론트 서버를 통해 오고 간 것처럼 보이기 때문에, 백엔드에서 내려준 Set-Cookie 헤더의 쿠키는 프론트 도메인 기준으로 저장됩니다.

즉, 브라우저는 쿠키를 Same-Origin의 쿠키로 간주하게 되어, 프론트에서 접근이 가능하도록 합니다.
